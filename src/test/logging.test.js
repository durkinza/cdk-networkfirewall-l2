"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
//import { Template, Match } from 'aws-cdk-lib//assertions';
const assertions_1 = require("aws-cdk-lib/assertions");
const ec2 = require("aws-cdk-lib/aws-ec2");
const kinesis = require("aws-cdk-lib/aws-kinesis");
const logs = require("aws-cdk-lib/aws-logs");
const S3 = require("aws-cdk-lib/aws-s3");
const cdk = require("aws-cdk-lib/core");
const NetFW = require("../lib");
test('Cloudwatch Logs', () => {
    // GIVEN
    const stack = new cdk.Stack();
    const vpc = new ec2.Vpc(stack, 'MyTestVpc', {
        ipAddresses: ec2.IpAddresses.cidr('10.0.0.0/16'),
    });
    const logGroup = new logs.LogGroup(stack, 'MyCustomLogGroup');
    // WHEN
    const policy = new NetFW.FirewallPolicy(stack, 'MyNetworkFirewallPolicy1', {
        statelessDefaultActions: [NetFW.StatelessStandardAction.DROP],
        statelessFragmentDefaultActions: [NetFW.StatelessStandardAction.DROP],
    });
    new NetFW.Firewall(stack, 'MyNetworkFirewall10', {
        vpc: vpc,
        policy: policy,
        loggingCloudWatchLogGroups: [
            {
                logGroup: logGroup.logGroupName,
                logType: NetFW.LogType.ALERT,
            },
        ],
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::NetworkFirewall::Firewall', {
        SubnetMappings: [
            {
                SubnetId: {
                    Ref: 'MyTestVpcPublicSubnet1SubnetA7B59A2C',
                },
            },
            {
                SubnetId: {
                    Ref: 'MyTestVpcPublicSubnet2SubnetBE93625D',
                },
            },
        ],
        VpcId: {
            Ref: 'MyTestVpcE144EEF4',
        },
    });
});
test('S3 Logs', () => {
    // GIVEN
    const stack = new cdk.Stack();
    const vpc = new ec2.Vpc(stack, 'MyTestVpc', {
        ipAddresses: ec2.IpAddresses.cidr('10.0.0.0/16'),
    });
    const logBucket = new S3.Bucket(stack, 'MyCustomLogBucket');
    // WHEN
    const policy = new NetFW.FirewallPolicy(stack, 'MyNetworkFirewallPolicy2', {
        statelessDefaultActions: [NetFW.StatelessStandardAction.DROP],
        statelessFragmentDefaultActions: [NetFW.StatelessStandardAction.DROP],
    });
    new NetFW.Firewall(stack, 'MyNetworkFirewall11', {
        vpc: vpc,
        policy: policy,
        loggingS3Buckets: [
            {
                bucketName: logBucket.bucketName,
                logType: NetFW.LogType.ALERT,
            },
        ],
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::NetworkFirewall::Firewall', {
        SubnetMappings: [
            {
                SubnetId: {
                    Ref: 'MyTestVpcPublicSubnet1SubnetA7B59A2C',
                },
            },
            {
                SubnetId: {
                    Ref: 'MyTestVpcPublicSubnet2SubnetBE93625D',
                },
            },
        ],
        VpcId: {
            Ref: 'MyTestVpcE144EEF4',
        },
    });
});
test('Kinesis Data Streams Logs', () => {
    // GIVEN
    const stack = new cdk.Stack();
    const vpc = new ec2.Vpc(stack, 'MyTestVpc', {
        ipAddresses: ec2.IpAddresses.cidr('10.0.0.0/16'),
    });
    const stream = new kinesis.Stream(stack, 'MyTestStream', {
        streamName: 'my-test-stream',
    });
    // WHEN
    const policy = new NetFW.FirewallPolicy(stack, 'MyNetworkFirewallPolicy3', {
        statelessDefaultActions: [NetFW.StatelessStandardAction.DROP],
        statelessFragmentDefaultActions: [NetFW.StatelessStandardAction.DROP],
    });
    new NetFW.Firewall(stack, 'MyNetworkFirewall12', {
        vpc: vpc,
        policy: policy,
        loggingKinesisDataStreams: [
            {
                deliveryStream: stream.streamName,
                logType: NetFW.LogType.FLOW,
            },
        ],
    });
    // THEN
    assertions_1.Template.fromStack(stack).hasResourceProperties('AWS::NetworkFirewall::Firewall', {
        SubnetMappings: [
            {
                SubnetId: {
                    Ref: 'MyTestVpcPublicSubnet1SubnetA7B59A2C',
                },
            },
            {
                SubnetId: {
                    Ref: 'MyTestVpcPublicSubnet2SubnetBE93625D',
                },
            },
        ],
        VpcId: {
            Ref: 'MyTestVpcE144EEF4',
        },
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2luZy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibG9nZ2luZy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNERBQTREO0FBQzVELHVEQUFrRDtBQUNsRCwyQ0FBMkM7QUFDM0MsbURBQW1EO0FBQ25ELDZDQUE2QztBQUM3Qyx5Q0FBeUM7QUFDekMsd0NBQXdDO0FBQ3hDLGdDQUFnQztBQUVoQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO0lBQzNCLFFBQVE7SUFDUixNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM5QixNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRTtRQUMxQyxXQUFXLEVBQUUsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDO0tBQ2pELENBQUMsQ0FBQztJQUVILE1BQU0sUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztJQUU5RCxPQUFPO0lBQ1AsTUFBTSxNQUFNLEdBQUcsSUFBSSxLQUFLLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSwwQkFBMEIsRUFBRTtRQUN6RSx1QkFBdUIsRUFBRSxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUM7UUFDN0QsK0JBQStCLEVBQUUsQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDO0tBQ3RFLENBQUMsQ0FBQztJQUNILElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUscUJBQXFCLEVBQUU7UUFDL0MsR0FBRyxFQUFFLEdBQUc7UUFDUixNQUFNLEVBQUUsTUFBTTtRQUNkLDBCQUEwQixFQUFFO1lBQzFCO2dCQUNFLFFBQVEsRUFBRSxRQUFRLENBQUMsWUFBWTtnQkFDL0IsT0FBTyxFQUFFLEtBQUssQ0FBQyxP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QUFJLENBQUM7UUFDN0QsK0JBQStCLEVBQUUsQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDO0tBQ3RFLENBQUMsQ0FBQztJQUVILElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUscUJBQXFCLEVBQUU7UUFDL0MsR0FBRyxFQUFFLEdBQUc7UUFDUixNQUFNLEVBQUUsTUFBTTtRQUNkLHlCQUF5QixFQUFFO1lBQ3pCO2dCQUNFLGNBQWMsRUFBRSxNQUFNLENBQUMsVUFBVTtnQkFDakMsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSTthQUM1QjtTQUNGO0tBQ0YsQ0FBQyxDQUFDO0lBRUgsT0FBTztJQUNQLHFCQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixDQUFDLGdDQUFnQyxFQUFFO1FBQ2hGLGNBQWMsRUFBRTtZQUNkO2dCQUNFLFFBQVEsRUFBRTtvQkFDUixHQUFHLEVBQUUsc0NBQXNDO2lCQUM1QzthQUNGO1lBQ0Q7Z0JBQ0UsUUFBUSxFQUFFO29CQUNSLEdBQUcsRUFBRSxzQ0FBc0M7aUJBQzVDO2FBQ0Y7U0FDRjtRQUNELEtBQUssRUFBRTtZQUNMLEdBQUcsRUFBRSxtQkFBbUI7U0FDekI7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vaW1wb3J0IHsgVGVtcGxhdGUsIE1hdGNoIH0gZnJvbSAnYXdzLWNkay1saWIvL2Fzc2VydGlvbnMnO1xuaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICdhd3MtY2RrLWxpYi9hc3NlcnRpb25zJztcbmltcG9ydCAqIGFzIGVjMiBmcm9tICdhd3MtY2RrLWxpYi9hd3MtZWMyJztcbmltcG9ydCAqIGFzIGtpbmVzaXMgZnJvbSAnYXdzLWNkay1saWIvYXdzLWtpbmVzaXMnO1xuaW1wb3J0ICogYXMgbG9ncyBmcm9tICdhd3MtY2RrLWxpYi9hd3MtbG9ncyc7XG5pbXBvcnQgKiBhcyBTMyBmcm9tICdhd3MtY2RrLWxpYi9hd3MtczMnO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliL2NvcmUnO1xuaW1wb3J0ICogYXMgTmV0RlcgZnJvbSAnLi4vbGliJztcblxudGVzdCgnQ2xvdWR3YXRjaCBMb2dzJywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgY29uc3QgdnBjID0gbmV3IGVjMi5WcGMoc3RhY2ssICdNeVRlc3RWcGMnLCB7XG4gICAgaXBBZGRyZXNzZXM6IGVjMi5JcEFkZHJlc3Nlcy5jaWRyKCcxMC4wLjAuMC8xNicpLFxuICB9KTtcblxuICBjb25zdCBsb2dHcm91cCA9IG5ldyBsb2dzLkxvZ0dyb3VwKHN0YWNrLCAnTXlDdXN0b21Mb2dHcm91cCcpO1xuXG4gIC8vIFdIRU5cbiAgY29uc3QgcG9saWN5ID0gbmV3IE5ldEZXLkZpcmV3YWxsUG9saWN5KHN0YWNrLCAnTXlOZXR3b3JrRmlyZXdhbGxQb2xpY3kxJywge1xuICAgIHN0YXRlbGVzc0RlZmF1bHRBY3Rpb25zOiBbTmV0RlcuU3RhdGVsZXNzU3RhbmRhcmRBY3Rpb24uRFJPUF0sXG4gICAgc3RhdGVsZXNzRnJhZ21lbnREZWZhdWx0QWN0aW9uczogW05ldEZXLlN0YXRlbGVzc1N0YW5kYXJkQWN0aW9uLkRST1BdLFxuICB9KTtcbiAgbmV3IE5ldEZXLkZpcmV3YWxsKHN0YWNrLCAnTXlOZXR3b3JrRmlyZXdhbGwxMCcsIHtcbiAgICB2cGM6IHZwYyxcbiAgICBwb2xpY3k6IHBvbGljeSxcbiAgICBsb2dnaW5nQ2xvdWRXYXRjaExvZ0dyb3VwczogW1xuICAgICAge1xuICAgICAgICBsb2dHcm91cDogbG9nR3JvdXAubG9nR3JvdXBOYW1lLFxuICAgICAgICBsb2dUeXBlOiBOZXRGVy5Mb2dUeXBlLkFMRVJULFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICAvLyBUSEVOXG4gIFRlbXBsYXRlLmZyb21TdGFjayhzdGFjaykuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKCdBV1M6Ok5ldHdvcmtGaXJld2FsbDo6RmlyZXdhbGwnLCB7XG4gICAgU3VibmV0TWFwcGluZ3M6IFtcbiAgICAgIHtcbiAgICAgICAgU3VibmV0SWQ6IHtcbiAgICAgICAgICBSZWY6ICdNeVRlc3RWcGNQdWJsaWNTdWJuZXQxU3VibmV0QTdCNTlBMkMnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgU3VibmV0SWQ6IHtcbiAgICAgICAgICBSZWY6ICdNeVRlc3RWcGNQdWJsaWNTdWJuZXQyU3VibmV0QkU5MzYyNUQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICAgIFZwY0lkOiB7XG4gICAgICBSZWY6ICdNeVRlc3RWcGNFMTQ0RUVGNCcsXG4gICAgfSxcbiAgfSk7XG59KTtcblxudGVzdCgnUzMgTG9ncycsICgpID0+IHtcbiAgLy8gR0lWRU5cbiAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG4gIGNvbnN0IHZwYyA9IG5ldyBlYzIuVnBjKHN0YWNrLCAnTXlUZXN0VnBjJywge1xuICAgIGlwQWRkcmVzc2VzOiBlYzIuSXBBZGRyZXNzZXMuY2lkcignMTAuMC4wLjAvMTYnKSxcbiAgfSk7XG5cbiAgY29uc3QgbG9nQnVja2V0ID0gbmV3IFMzLkJ1Y2tldChzdGFjaywgJ015Q3VzdG9tTG9nQnVja2V0Jyk7XG5cbiAgLy8gV0hFTlxuICBjb25zdCBwb2xpY3kgPSBuZXcgTmV0RlcuRmlyZXdhbGxQb2xpY3koc3RhY2ssICdNeU5ldHdvcmtGaXJld2FsbFBvbGljeTInLCB7XG4gICAgc3RhdGVsZXNzRGVmYXVsdEFjdGlvbnM6IFtOZXRGVy5TdGF0ZWxlc3NTdGFuZGFyZEFjdGlvbi5EUk9QXSxcbiAgICBzdGF0ZWxlc3NGcmFnbWVudERlZmF1bHRBY3Rpb25zOiBbTmV0RlcuU3RhdGVsZXNzU3RhbmRhcmRBY3Rpb24uRFJPUF0sXG4gIH0pO1xuICBuZXcgTmV0RlcuRmlyZXdhbGwoc3RhY2ssICdNeU5ldHdvcmtGaXJld2FsbDExJywge1xuICAgIHZwYzogdnBjLFxuICAgIHBvbGljeTogcG9saWN5LFxuICAgIGxvZ2dpbmdTM0J1Y2tldHM6IFtcbiAgICAgIHtcbiAgICAgICAgYnVja2V0TmFtZTogbG9nQnVja2V0LmJ1Y2tldE5hbWUsXG4gICAgICAgIGxvZ1R5cGU6IE5ldEZXLkxvZ1R5cGUuQUxFUlQsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pO1xuXG4gIC8vIFRIRU5cbiAgVGVtcGxhdGUuZnJvbVN0YWNrKHN0YWNrKS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoJ0FXUzo6TmV0d29ya0ZpcmV3YWxsOjpGaXJld2FsbCcsIHtcbiAgICBTdWJuZXRNYXBwaW5nczogW1xuICAgICAge1xuICAgICAgICBTdWJuZXRJZDoge1xuICAgICAgICAgIFJlZjogJ015VGVzdFZwY1B1YmxpY1N1Ym5ldDFTdWJuZXRBN0I1OUEyQycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBTdWJuZXRJZDoge1xuICAgICAgICAgIFJlZjogJ015VGVzdFZwY1B1YmxpY1N1Ym5ldDJTdWJuZXRCRTkzNjI1RCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgVnBjSWQ6IHtcbiAgICAgIFJlZjogJ015VGVzdFZwY0UxNDRFRUY0JyxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG50ZXN0KCdLaW5lc2lzIERhdGEgU3RyZWFtcyBMb2dzJywgKCkgPT4ge1xuICAvLyBHSVZFTlxuICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgY29uc3QgdnBjID0gbmV3IGVjMi5WcGMoc3RhY2ssICdNeVRlc3RWcGMnLCB7XG4gICAgaXBBZGRyZXNzZXM6IGVjMi5JcEFkZHJlc3Nlcy5jaWRyKCcxMC4wLjAuMC8xNicpLFxuICB9KTtcblxuICBjb25zdCBzdHJlYW0gPSBuZXcga2luZXNpcy5TdHJlYW0oc3RhY2ssICdNeVRlc3RTdHJlYW0nLCB7XG4gICAgc3RyZWFtTmFtZTogJ215LXRlc3Qtc3RyZWFtJyxcbiAgfSk7XG5cbiAgLy8gV0hFTlxuICBjb25zdCBwb2xpY3kgPSBuZXcgTmV0RlcuRmlyZXdhbGxQb2xpY3koc3RhY2ssICdNeU5ldHdvcmtGaXJld2FsbFBvbGljeTMnLCB7XG4gICAgc3RhdGVsZXNzRGVmYXVsdEFjdGlvbnM6IFtOZXRGVy5TdGF0ZWxlc3NTdGFuZGFyZEFjdGlvbi5EUk9QXSxcbiAgICBzdGF0ZWxlc3NGcmFnbWVudERlZmF1bHRBY3Rpb25zOiBbTmV0RlcuU3RhdGVsZXNzU3RhbmRhcmRBY3Rpb24uRFJPUF0sXG4gIH0pO1xuXG4gIG5ldyBOZXRGVy5GaXJld2FsbChzdGFjaywgJ015TmV0d29ya0ZpcmV3YWxsMTInLCB7XG4gICAgdnBjOiB2cGMsXG4gICAgcG9saWN5OiBwb2xpY3ksXG4gICAgbG9nZ2luZ0tpbmVzaXNEYXRhU3RyZWFtczogW1xuICAgICAge1xuICAgICAgICBkZWxpdmVyeVN0cmVhbTogc3RyZWFtLnN0cmVhbU5hbWUsXG4gICAgICAgIGxvZ1R5cGU6IE5ldEZXLkxvZ1R5cGUuRkxPVyxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgLy8gVEhFTlxuICBUZW1wbGF0ZS5mcm9tU3RhY2soc3RhY2spLmhhc1Jlc291cmNlUHJvcGVydGllcygnQVdTOjpOZXR3b3JrRmlyZXdhbGw6OkZpcmV3YWxsJywge1xuICAgIFN1Ym5ldE1hcHBpbmdzOiBbXG4gICAgICB7XG4gICAgICAgIFN1Ym5ldElkOiB7XG4gICAgICAgICAgUmVmOiAnTXlUZXN0VnBjUHVibGljU3VibmV0MVN1Ym5ldEE3QjU5QTJDJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFN1Ym5ldElkOiB7XG4gICAgICAgICAgUmVmOiAnTXlUZXN0VnBjUHVibGljU3VibmV0MlN1Ym5ldEJFOTM2MjVEJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBWcGNJZDoge1xuICAgICAgUmVmOiAnTXlUZXN0VnBjRTE0NEVFRjQnLFxuICAgIH0sXG4gIH0pO1xufSk7Il19